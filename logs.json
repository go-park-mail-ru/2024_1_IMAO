{"level":"info","ts":1712693535.0292768,"caller":"repository/auth_storage.go:32","msg":"SELECT EXISTS(SELECT 1 FROM public.user WHERE email=%+vexample10@bk.ru"}
{"level":"info","ts":1712693536.1232169,"caller":"repository/auth_storage.go:32","msg":"SELECT EXISTS(SELECT 1 FROM public.user WHERE email=%+vexample10@bk.ru"}
{"level":"info","ts":1712693536.817196,"caller":"repository/auth_storage.go:32","msg":"SELECT EXISTS(SELECT 1 FROM public.user WHERE email=%+vexample10@bk.ru"}
{"level":"info","ts":1712693540.255506,"caller":"repository/auth_storage.go:32","msg":"SELECT EXISTS(SELECT 1 FROM public.user WHERE email=%+vexample10@bk.ru"}
{"level":"info","ts":1712694657.1349745,"caller":"repository/auth_storage.go:32","msg":"SELECT EXISTS(SELECT 1 FROM public.\"user\" WHERE email=example10@bk.ru"}
{"level":"info","ts":1712694658.1249628,"caller":"repository/auth_storage.go:32","msg":"SELECT EXISTS(SELECT 1 FROM public.\"user\" WHERE email=example10@bk.ru"}
{"level":"info","ts":1712694663.259275,"caller":"repository/auth_storage.go:32","msg":"SELECT EXISTS(SELECT 1 FROM public.\"user\" WHERE email=example11@bk.ru"}
{"level":"info","ts":1712694664.0346024,"caller":"repository/auth_storage.go:32","msg":"SELECT EXISTS(SELECT 1 FROM public.\"user\" WHERE email=example11@bk.ru"}
{"level":"info","ts":1712694664.0450807,"caller":"repository/auth_storage.go:94","msg":"INSERT INTO public.\"user\"(email, password_hash) VALUES (example11@bk.ru, $2a$14$rD0ALMwG0cVlLyTDWs1u.ujZmwqo/Hz0Iqurmbkz.Emh4Xtlr0ynG)"}
{"level":"info","ts":1712698397.4263885,"caller":"repository/auth_storage.go:161","msg":"SELECT id, email, password_hash\tFROM public.\"user\" where email = example4@bk.ru"}
{"level":"info","ts":1712698398.1866465,"caller":"delivery/auth_handlers.go:109","msg":"Userexample4@bk.ruhave been authorized with session ID:mnBpDCRAgWpCnuuQmbWxEHPzAIvbLFNb"}
{"level":"info","ts":1712698404.7227957,"caller":"repository/auth_storage.go:195","msg":"SELECT id, email, password_hash\tFROM public.\"user\" where id = %!s(uint=4)"}
{"level":"info","ts":1712698404.7248778,"caller":"repository/profile_storage.go:198","msg":"UPDATE public.profile p\n\tSET city_id = %!s(uint=200)\n\tFROM public.city c\n\tWHERE c.id = %!s(uint=4) AND p.user_id = %!s(MISSING)\n\tRETURNING p.id, p.user_id, p.city_id, p.phone, p.name, p.surname, p.regtime, p.verified, p.avatar_url, c.name AS city_name, c.translation AS city_translation;"}
{"level":"error","ts":1712698404.7259197,"caller":"repository/profile_storage.go:214","msg":"Something went wrong while scanning profile lines, err=expected 2 arguments, got 3","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).setProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:214\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfileCity.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:260\ngithub.com/jackc/pgx/v5.beginFuncExec\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:425\ngithub.com/jackc/pgx/v5.BeginFunc\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:394\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:259\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:86\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"error","ts":1712698404.7269754,"caller":"repository/profile_storage.go:263","msg":"Something went wrong while updating profile city , err=expected 2 arguments, got 3","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfileCity.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:263\ngithub.com/jackc/pgx/v5.beginFuncExec\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:425\ngithub.com/jackc/pgx/v5.BeginFunc\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:394\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:259\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:86\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"error","ts":1712698404.7306526,"caller":"repository/profile_storage.go:269","msg":"Something went wrong , err=profile does not exist","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:269\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:86\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"error","ts":1712698404.7311883,"caller":"delivery/profile_handlers.go:88","msg":"profile does not exist 400","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:88\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"info","ts":1712698423.6676247,"caller":"repository/auth_storage.go:195","msg":"SELECT id, email, password_hash\tFROM public.\"user\" where id = %!s(uint=4)"}
{"level":"info","ts":1712698423.6697114,"caller":"repository/profile_storage.go:198","msg":"UPDATE public.profile p\n\tSET city_id = %!s(uint=200)\n\tFROM public.city c\n\tWHERE c.id = %!s(uint=4) AND p.user_id = %!s(MISSING)\n\tRETURNING p.id, p.user_id, p.city_id, p.phone, p.name, p.surname, p.regtime, p.verified, p.avatar_url, c.name AS city_name, c.translation AS city_translation;"}
{"level":"error","ts":1712698423.6702316,"caller":"repository/profile_storage.go:214","msg":"Something went wrong while scanning profile lines, err=expected 2 arguments, got 3","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).setProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:214\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfileCity.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:260\ngithub.com/jackc/pgx/v5.beginFuncExec\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:425\ngithub.com/jackc/pgx/v5.BeginFunc\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:394\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:259\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:86\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"error","ts":1712698423.671797,"caller":"repository/profile_storage.go:263","msg":"Something went wrong while updating profile city , err=expected 2 arguments, got 3","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfileCity.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:263\ngithub.com/jackc/pgx/v5.beginFuncExec\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:425\ngithub.com/jackc/pgx/v5.BeginFunc\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:394\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:259\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:86\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"error","ts":1712698423.6733763,"caller":"repository/profile_storage.go:269","msg":"Something went wrong , err=profile does not exist","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:269\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:86\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"error","ts":1712698423.674961,"caller":"delivery/profile_handlers.go:88","msg":"profile does not exist 400","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:88\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"info","ts":1712698541.488297,"caller":"repository/auth_storage.go:161","msg":"SELECT id, email, password_hash\tFROM public.\"user\" where email = example2@bk.ru"}
{"level":"info","ts":1712698542.2715673,"caller":"delivery/auth_handlers.go:109","msg":"Userexample2@bk.ruhave been authorized with session ID:yMwFKzQaXzwGhRfmRTFlSjCzrFpSgfHR"}
{"level":"info","ts":1712698546.331695,"caller":"repository/auth_storage.go:195","msg":"SELECT id, email, password_hash\tFROM public.\"user\" where id = %!s(uint=2)"}
{"level":"info","ts":1712698546.334695,"caller":"repository/profile_storage.go:198","msg":"UPDATE public.profile p\n\tSET city_id = %!s(uint=200)\n\tFROM public.city c\n\tWHERE c.id = %!s(uint=2) AND p.user_id = %!s(MISSING)\n\tRETURNING p.id, p.user_id, p.city_id, p.phone, p.name, p.surname, p.regtime, p.verified, p.avatar_url, c.name AS city_name, c.translation AS city_translation;"}
{"level":"error","ts":1712698546.3356965,"caller":"repository/profile_storage.go:214","msg":"Something went wrong while scanning profile lines, err=expected 2 arguments, got 3","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).setProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:214\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfileCity.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:260\ngithub.com/jackc/pgx/v5.beginFuncExec\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:425\ngithub.com/jackc/pgx/v5.BeginFunc\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:394\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:259\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:86\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"error","ts":1712698546.3366964,"caller":"repository/profile_storage.go:263","msg":"Something went wrong while updating profile city , err=expected 2 arguments, got 3","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfileCity.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:263\ngithub.com/jackc/pgx/v5.beginFuncExec\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:425\ngithub.com/jackc/pgx/v5.BeginFunc\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:394\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:259\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:86\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"error","ts":1712698546.337696,"caller":"repository/profile_storage.go:269","msg":"Something went wrong , err=profile does not exist","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:269\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:86\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"error","ts":1712698546.3386958,"caller":"delivery/profile_handlers.go:88","msg":"profile does not exist 400","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:88\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"info","ts":1712698554.6650555,"caller":"repository/auth_storage.go:195","msg":"SELECT id, email, password_hash\tFROM public.\"user\" where id = %!s(uint=2)"}
{"level":"info","ts":1712698554.6666791,"caller":"repository/profile_storage.go:285","msg":"UPDATE public.profile p\n\tSET phone = 7 666 777 55 77\n\tFROM public.city c\n\tWHERE c.id = p.city_id AND p.user_id = %!s(uint=2)\n\tRETURNING p.id, p.user_id, p.city_id, p.phone, p.name, p.surname, p.regtime, p.verified, p.avatar_url, c.name AS city_name, c.translation AS city_translation;"}
{"level":"error","ts":1712698554.6693192,"caller":"repository/profile_storage.go:301","msg":"Something went wrong while scanning profile lines , err=ERROR: duplicate key value violates unique constraint \"profile_phone_key\" (SQLSTATE 23505)","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).setProfilePhone\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:301\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfilePhone.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:347\ngithub.com/jackc/pgx/v5.beginFuncExec\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:425\ngithub.com/jackc/pgx/v5.BeginFunc\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:394\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfilePhone\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:346\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).SetProfilePhone\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:179\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"error","ts":1712698554.67089,"caller":"repository/profile_storage.go:350","msg":"Something went wrong while updating profile phone, err=ERROR: duplicate key value violates unique constraint \"profile_phone_key\" (SQLSTATE 23505)","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfilePhone.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:350\ngithub.com/jackc/pgx/v5.beginFuncExec\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:425\ngithub.com/jackc/pgx/v5.BeginFunc\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:394\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfilePhone\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:346\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).SetProfilePhone\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:179\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"error","ts":1712698554.6724803,"caller":"repository/profile_storage.go:356","msg":"Something went wrong , err=profile does not exist","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfilePhone\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:356\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).SetProfilePhone\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:179\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"error","ts":1712698554.6735582,"caller":"delivery/profile_handlers.go:181","msg":"profile does not exist 400","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).SetProfilePhone\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:181\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"info","ts":1712698560.7728198,"caller":"repository/auth_storage.go:195","msg":"SELECT id, email, password_hash\tFROM public.\"user\" where id = %!s(uint=2)"}
{"level":"info","ts":1712698560.7749162,"caller":"repository/profile_storage.go:285","msg":"UPDATE public.profile p\n\tSET phone = 7 555 777 55 77\n\tFROM public.city c\n\tWHERE c.id = p.city_id AND p.user_id = %!s(uint=2)\n\tRETURNING p.id, p.user_id, p.city_id, p.phone, p.name, p.surname, p.regtime, p.verified, p.avatar_url, c.name AS city_name, c.translation AS city_translation;"}
{"level":"error","ts":1712698560.7771451,"caller":"repository/profile_storage.go:350","msg":"Something went wrong while updating profile phone, err=<nil>","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfilePhone.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:350\ngithub.com/jackc/pgx/v5.beginFuncExec\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:425\ngithub.com/jackc/pgx/v5.BeginFunc\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:394\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfilePhone\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:346\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).SetProfilePhone\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:179\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"info","ts":1712698588.4209077,"caller":"repository/auth_storage.go:195","msg":"SELECT id, email, password_hash\tFROM public.\"user\" where id = %!s(uint=2)"}
{"level":"info","ts":1712698588.423014,"caller":"repository/profile_storage.go:285","msg":"UPDATE public.profile p\n\tSET phone = 7 555 777 55 55\n\tFROM public.city c\n\tWHERE c.id = p.city_id AND p.user_id = %!s(uint=2)\n\tRETURNING p.id, p.user_id, p.city_id, p.phone, p.name, p.surname, p.regtime, p.verified, p.avatar_url, c.name AS city_name, c.translation AS city_translation;"}
{"level":"error","ts":1712698588.4240708,"caller":"repository/profile_storage.go:350","msg":"Something went wrong while updating profile phone, err=<nil>","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfilePhone.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:350\ngithub.com/jackc/pgx/v5.beginFuncExec\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:425\ngithub.com/jackc/pgx/v5.BeginFunc\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:394\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfilePhone\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:346\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).SetProfilePhone\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:179\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"info","ts":1712698685.2356815,"caller":"repository/profile_storage.go:101","msg":"\n\tSELECT \n\t\tp.id, \n\t\tp.user_id, \n\t\tp.city_id, \n\t\tp.phone, \n\t\tp.name, \n\t\tp.surname, \n\t\tp.regtime, \n\t\tp.verified, \n\t\tp.avatar_url,\n\t\tc.name AS city_name,\n\t\tc.translation AS city_translation\n\tFROM \n\t\tpublic.profile p\n\tINNER JOIN \n\t\tpublic.city c\n\tON \n\t\tp.city_id = c.id\n\tWHERE \n\t\tp.user_id = %!s(uint=2)"}
{"level":"error","ts":1712698685.2377849,"caller":"repository/profile_storage.go:176","msg":"Something went wrong while getting profile by UserID, err=<nil>","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).GetProfileByUserID.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:176\ngithub.com/jackc/pgx/v5.beginFuncExec\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:425\ngithub.com/jackc/pgx/v5.BeginFunc\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:394\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).GetProfileByUserID\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:172\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).GetProfile\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:39\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"info","ts":1712699075.2806442,"caller":"repository/auth_storage.go:161","msg":"SELECT id, email, password_hash\tFROM public.\"user\" where email = example7@bk.ru"}
{"level":"info","ts":1712699076.057568,"caller":"delivery/auth_handlers.go:109","msg":"Userexample7@bk.ruhave been authorized with session ID:EiXUPgGRVnhFKCebboAMZQUzupIHUAUp"}
{"level":"info","ts":1712699080.0748477,"caller":"repository/profile_storage.go:101","msg":"\n\tSELECT \n\t\tp.id, \n\t\tp.user_id, \n\t\tp.city_id, \n\t\tp.phone, \n\t\tp.name, \n\t\tp.surname, \n\t\tp.regtime, \n\t\tp.verified, \n\t\tp.avatar_url,\n\t\tc.name AS city_name,\n\t\tc.translation AS city_translation\n\tFROM \n\t\tpublic.profile p\n\tINNER JOIN \n\t\tpublic.city c\n\tON \n\t\tp.city_id = c.id\n\tWHERE \n\t\tp.user_id = %!s(uint=2)"}
{"level":"info","ts":1712699094.299072,"caller":"repository/auth_storage.go:195","msg":"SELECT id, email, password_hash\tFROM public.\"user\" where id = %!s(uint=7)"}
{"level":"info","ts":1712699094.3012173,"caller":"repository/profile_storage.go:281","msg":"UPDATE public.profile p\n\tSET phone = 7 555 777 55 54\n\tFROM public.city c\n\tWHERE c.id = p.city_id AND p.user_id = %!s(uint=7)\n\tRETURNING p.id, p.user_id, p.city_id, p.phone, p.name, p.surname, p.regtime, p.verified, p.avatar_url, c.name AS city_name, c.translation AS city_translation;"}
{"level":"info","ts":1712699108.2627387,"caller":"repository/auth_storage.go:195","msg":"SELECT id, email, password_hash\tFROM public.\"user\" where id = %!s(uint=7)"}
{"level":"info","ts":1712699108.2653658,"caller":"repository/profile_storage.go:196","msg":"UPDATE public.profile p\n\tSET city_id = %!s(uint=20)\n\tFROM public.city c\n\tWHERE c.id = %!s(uint=7) AND p.user_id = %!s(MISSING)\n\tRETURNING p.id, p.user_id, p.city_id, p.phone, p.name, p.surname, p.regtime, p.verified, p.avatar_url, c.name AS city_name, c.translation AS city_translation;"}
{"level":"error","ts":1712699108.2664185,"caller":"repository/profile_storage.go:212","msg":"Something went wrong while scanning profile lines, err=expected 2 arguments, got 3","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).setProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:212\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfileCity.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:258\ngithub.com/jackc/pgx/v5.beginFuncExec\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:425\ngithub.com/jackc/pgx/v5.BeginFunc\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/jackc/pgx/v5/tx.go:394\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:257\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:86\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"error","ts":1712699108.2690537,"caller":"repository/profile_storage.go:265","msg":"Something went wrong while updating profile city, err=profile does not exist","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/repository.(*ProfileListWrapper).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/repository/profile_storage.go:265\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:86\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"error","ts":1712699108.2706206,"caller":"delivery/profile_handlers.go:88","msg":"profile does not exist 400","stacktrace":"github.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/profile/delivery.(*ProfileHandler).SetProfileCity\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/profile/delivery/profile_handlers.go:88\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/go-park-mail-ru/2024_1_IMAO/internal/pkg/server/delivery/router.recoveryMiddleware.func1\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/internal/pkg/server/delivery/router/router.go:119\nnet/http.HandlerFunc.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:2166\ngithub.com/gorilla/mux.(*Router).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/mux/mux.go:212\ngithub.com/gorilla/handlers.(*cors).ServeHTTP\n\tC:/Users/Pes_Tick/Documents/GitHub/park-mail-ru-go/2024_1_IMAO/vendor/github.com/gorilla/handlers/cors.go:54\nnet/http.serverHandler.ServeHTTP\n\tC:/Program Files/Go/src/net/http/server.go:3137\nnet/http.(*conn).serve\n\tC:/Program Files/Go/src/net/http/server.go:2039"}
{"level":"info","ts":1712699328.7371652,"caller":"repository/auth_storage.go:161","msg":"SELECT id, email, password_hash\tFROM public.\"user\" where email = example7@bk.ru"}
{"level":"info","ts":1712699329.497585,"caller":"delivery/auth_handlers.go:109","msg":"Userexample7@bk.ruhave been authorized with session ID:ZpMOUSUHmocflAItPIqsValvQGKBuBnQ"}
{"level":"info","ts":1712699333.8546402,"caller":"repository/auth_storage.go:195","msg":"SELECT id, email, password_hash\tFROM public.\"user\" where id = %!s(uint=7)"}
{"level":"info","ts":1712699333.8567302,"caller":"repository/profile_storage.go:196","msg":"UPDATE public.profile p\n\tSET city_id = %!s(uint=20)\n\tFROM public.city c\n\tWHERE c.id = %!s(uint=20) AND p.user_id = %!s(uint=7)\n\tRETURNING p.id, p.user_id, p.city_id, p.phone, p.name, p.surname, p.regtime, p.verified, p.avatar_url, c.name AS city_name, c.translation AS city_translation;"}
{"level":"info","ts":1712699979.81671,"caller":"repository/city_storage.go:27","msg":"SELECT id, name, translation FROM public.city;"}
